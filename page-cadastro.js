jQuery(function(a){a(document).ready(function(){a('form.cadastro-usuario input[type="submit"]').click(function(e){e.preventDefault();var o=a(this);o.prop("disabled",!0);try{var r=!("1"==cosmedfarma_global.is_user_logged_in);if(""==a('form.cadastro-usuario input[name="nome"]').val()||""==a('form.cadastro-usuario input[name="sobrenome"]').val()||""==a('form.cadastro-usuario input[name="crm_crn"]').val()||""==a('form.cadastro-usuario input[name="email"]').val()||r&&(""==a('form.cadastro-usuario input[name="senha"]').val()||""==a('form.cadastro-usuario input[name="senha_novamente"]').val()))throw cosmedfarma_i18n.all_fields_are_required;if(a('form.cadastro-usuario input[name="senha"]').val()!=a('form.cadastro-usuario input[name="senha_novamente"]').val())throw cosmedfarma_i18n.passwords_must_match;a("form.cadastro-usuario p.submit img").show();var n="1"==cosmedfarma_global.is_user_logged_in?"netsis_update_user":"netsis_new_user";a.ajax({type:"POST",url:theme_ajax.url,data:{action:n,nonce:a('form.cadastro-usuario input[name="vb_user_nonce"]').val(),nome:a('form.cadastro-usuario input[name="nome"]').val(),sobrenome:a('form.cadastro-usuario input[name="sobrenome"]').val(),crm_crn:a('form.cadastro-usuario input[name="crm_crn"]').val(),email:a('form.cadastro-usuario input[name="email"]').val(),senha:a('form.cadastro-usuario input[name="senha"]').val(),senha_novamente:a('form.cadastro-usuario input[name="senha_novamente"]').val()},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).done(function(e){e=JSON.parse(e),e.success?"1"==cosmedfarma_global.is_user_logged_in?"undefined"!=typeof e.code&&100==e.code?(alert(e.msg),window.location=e.redirection_url):(alert("Informações atualizadas com sucesso!"),a("form.cadastro-usuario p.submit img").hide(),o.prop("disabled",!1)):window.location=e.redirection_url:alert("ERRO: "+e.msg),a("form.cadastro-usuario p.submit img").hide()}).fail(function(e){console.log(e);try{e=JSON.parse(e.responseText),alert("ERRO: "+e.msg)}catch(r){alert(r)}a("form.cadastro-usuario p.submit img").hide(),o.prop("disabled",!1)})}catch(s){o.prop("disabled",!1),alert(s)}}),a("div.menu-user a.logout").click(function(e){e.preventDefault(),a("div.menu-user img").show(),a.ajax({type:"POST",url:theme_ajax.url,data:{action:"user_logout"},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).done(function(e){e=JSON.parse(e),e.success?window.location=e.redirection_url:(alert("ERRO: "+e.msg),a("div.menu-user img").hide())}).fail(function(e){console.log(e);try{e=JSON.parse(e.responseText),alert("ERRO: "+e.msg)}catch(o){alert(o)}a("div.menu-user img").hide()})})})});